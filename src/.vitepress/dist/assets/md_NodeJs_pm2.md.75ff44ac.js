import { _ as s, c as n, o as a, a as e } from './app.dfde2fab.js';
const g =
    '{"title":"pm2 \u8FDB\u7A0B\u5B88\u62A4","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u7279\u70B9\uFF1A","slug":"\u7279\u70B9\uFF1A"},{"level":2,"title":"\u5E38\u7528\u547D\u4EE4\uFF1A","slug":"\u5E38\u7528\u547D\u4EE4\uFF1A"},{"level":2,"title":"\u57FA\u672C\u914D\u7F6E","slug":"\u57FA\u672C\u914D\u7F6E"},{"level":2,"title":"\u57FA\u672C\u4F7F\u7528","slug":"\u57FA\u672C\u4F7F\u7528"},{"level":2,"title":"\u65E5\u5FD7\u62C6\u5206","slug":"\u65E5\u5FD7\u62C6\u5206"}],"relativePath":"md/NodeJs/pm2.md","lastUpdated":1638340958387}',
  t = {},
  p = e(
    `<h1 id="pm2-\u8FDB\u7A0B\u5B88\u62A4" tabindex="-1"><code>pm2</code> \u8FDB\u7A0B\u5B88\u62A4 <a class="header-anchor" href="#pm2-\u8FDB\u7A0B\u5B88\u62A4" aria-hidden="true">#</a></h1><h2 id="\u7279\u70B9\uFF1A" tabindex="-1">\u7279\u70B9\uFF1A <a class="header-anchor" href="#\u7279\u70B9\uFF1A" aria-hidden="true">#</a></h2><ul><li>\u8FDB\u7A0B\u5B88\u62A4\uFF1A\u7A33\u5B9A</li><li>\u591A\u8FDB\u7A0B\uFF1A\u9AD8\u6548</li><li>\u65E5\u5FD7\u8BB0\u5F55 \uFF1A\u95EE\u9898\u53EF\u8FFD\u6EAF</li></ul><h2 id="\u5E38\u7528\u547D\u4EE4\uFF1A" tabindex="-1">\u5E38\u7528\u547D\u4EE4\uFF1A <a class="header-anchor" href="#\u5E38\u7528\u547D\u4EE4\uFF1A" aria-hidden="true">#</a></h2><ul><li><code>pm2 start index.js</code>\uFF1A\u542F\u52A8\u4E00\u4E2A js \u8FDB\u7A0B</li><li><code>pm2 restart &lt;id/name&gt;</code>\uFF1A\u91CD\u542F\u4E00\u4E2A\u8FDB\u7A0B</li><li><code>pm2 reload</code>\uFF1A\u9010\u4E2A\u91CD\u542F\u8FDB\u7A0B</li><li><code>pm2 list</code>\uFF1A\u67E5\u770B\u8FDB\u7A0B\u5217\u8868</li><li><code>pm2 logs &lt;id/name&gt;</code>\uFF1A\u67E5\u770B\u8FDB\u7A0B\u8F93\u51FA\u7684\u65E5\u5FD7</li><li><code>pm2 stop &lt;id/name&gt;</code>\uFF1A\u505C\u6B62\u8FDB\u7A0B</li><li><code>pm2 delete &lt;id/name&gt;</code>\uFF1A\u5220\u9664\u8FDB\u7A0B</li><li><code>pm2 monit</code>\uFF1A\u6027\u80FD\u76D1\u63A7</li><li><code>pm2 startup</code>:\u751F\u6210 pm2-root \u5F00\u673A\u81EA\u542F\u52A8\u811A\u672C\uFF0C\u8BBE\u7F6E pm2-root \u4E3A\u670D\u52A1</li><li><code>pm2 save</code>:\u5C06\u5F53\u524D\u8FD0\u884C\u7684\u9879\u76EE\u4FDD\u5B58\uFF0Cpm2-root \u4F1A\u81EA\u52A8\u8BFB\u53D6\u542F\u52A8</li></ul><h2 id="\u57FA\u672C\u914D\u7F6E" tabindex="-1">\u57FA\u672C\u914D\u7F6E <a class="header-anchor" href="#\u57FA\u672C\u914D\u7F6E" aria-hidden="true">#</a></h2><div class="language-javascript"><pre><code><span class="token keyword">const</span> os <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;os&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cpuCoreLength <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">cpus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// CPU \u51E0\u6838</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">apps</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;your-server-name&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// \u542F\u52A8\u6587\u4EF6</span>
    <span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token string">&#39;bin/www&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// \u662F\u5426\u76D1\u63A7\u6587\u4EF6\uFF0C\u4FEE\u6539\u6587\u4EF6\u65F6\uFF0C\u81EA\u52A8\u91CD\u542F</span>
    <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ignore_watch</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;node_modules&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;__test__&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;logs&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// \u5F00\u542F\u7684\u5B9E\u4F8B\u6570\u91CF\uFF0C\u6D4B\u8BD5\u73AF\u5883\u5F00\u542F\u4E00\u4E2A\u5373\u53EF</span>
    <span class="token literal-property property">instances</span><span class="token operator">:</span> cpuCoreLength<span class="token punctuation">,</span>
    <span class="token comment">// \u8F93\u51FA\u9519\u8BEF\u65E5\u5FD7\u4F4D\u7F6E</span>
    <span class="token literal-property property">error_file</span><span class="token operator">:</span> <span class="token string">&#39;./logs/err.log&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">out_file</span><span class="token operator">:</span> <span class="token string">&#39;./logs/out.log&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// \u65E5\u5FD7\u65F6\u95F4\u683C\u5F0F\u5316\uFF0CZ\u8868\u793A\u4F7F\u7528\u5F53\u524D\u65F6\u533A\u7684\u65F6\u95F4\u683C\u5F0F</span>
    <span class="token literal-property property">log_date_format</span><span class="token operator">:</span> <span class="token string">&#39;YYYY-MM-DD HH:mm:ss Z&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// \u591A\u4E2A\u5B9E\u4F8B\u5408\u5E76\u65E5\u5FD7</span>
    <span class="token literal-property property">combile_logs</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// \u5185\u5B58\u5360\u7528\u8D85\u8FC7300M\u65F6\u91CD\u542F</span>
    <span class="token literal-property property">max_memory_restart</span><span class="token operator">:</span> <span class="token string">&#39;300M&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="\u57FA\u672C\u4F7F\u7528" tabindex="-1">\u57FA\u672C\u4F7F\u7528 <a class="header-anchor" href="#\u57FA\u672C\u4F7F\u7528" aria-hidden="true">#</a></h2><ol><li>\u5B89\u88C5<code>pm2</code>:<code>npm i pm2 -g</code></li><li>\u914D\u7F6E\u4E00\u4E2A<code>pm2.config.js</code>\u6587\u4EF6\u5B58\u653E\u5728<code>bin</code>\u76EE\u5F55</li><li>\u5728<code>package.json</code>\u4E2D\u914D\u7F6E<code>script</code>\uFF1A<code>cross-env NODE_ENV=dev pm2 start /bin/pm2.config.js</code></li><li>\u542F\u52A8<code>script</code></li></ol><h2 id="\u65E5\u5FD7\u62C6\u5206" tabindex="-1">\u65E5\u5FD7\u62C6\u5206 <a class="header-anchor" href="#\u65E5\u5FD7\u62C6\u5206" aria-hidden="true">#</a></h2><p>\u4E00\u4E2A\u65E5\u5FD7\u6587\u4EF6\u8FC7\u5927\u65F6\uFF0C\u4E0D\u65B9\u4FBF\u5B9A\u4F4D\u95EE\u9898</p><p>\u4F7F\u7528 <a href="https://www.npmjs.com/package/pm2-logrotate" target="_blank" rel="noopener noreferrer"><code>pm2-logrotate</code></a> \u5B89\u88C5\uFF1A<code>pm2 install pm2-logrotate -g</code>\uFF0C\u8FD0\u884C<code>pm2 list</code>\u5373\u53EF\u770B\u5230<code>pm2-logrotate</code>\u7684\u8FDB\u7A0B</p><div class="language-bash"><pre><code><span class="token comment"># \u9ED8\u8BA4\u914D\u7F6E\u5982\u4E0B</span>
pm2 <span class="token builtin class-name">set</span> pm2-logrotate:max_size 10M <span class="token comment">#\u65E5\u5FD7\u6587\u4EF6\u6700\u592710m</span>
pm2 <span class="token builtin class-name">set</span> pm2-logrotate:retain <span class="token number">30</span> <span class="token comment">#\u4FDD\u755930\u4E2A\u6587\u4EF6 \u591A\u4E86\u81EA\u52A8\u5220\u9664</span>
pm2 <span class="token builtin class-name">set</span> pm2-logrotate:compress <span class="token boolean">false</span> <span class="token comment">#gzip</span>
pm2 <span class="token builtin class-name">set</span> pm2-logrotate:dateFormat YYYY-MM-DD_HH-mm-ss
pm2 <span class="token builtin class-name">set</span> pm2-logrotate:workerInterval <span class="token number">30</span> <span class="token comment">#\u5355\u4F4D s\uFF0C\u65E5\u5FD7\u68C0\u67E5\u7684\u65F6\u95F4\u95F4\u9694</span>
pm2 <span class="token builtin class-name">set</span> pm2-logrotate:rotateInterval <span class="token number">0</span> <span class="token number">0</span> * * * <span class="token comment">#\u5B9A\u65F6\u89C4\u5219</span>
pm2 <span class="token builtin class-name">set</span> pm2-logrotate:rotateModule <span class="token boolean">true</span> <span class="token comment"># \u5206\u5272pm2\u6A21\u5757\u7684\u65E5\u5FD7</span>
</code></pre></div>`,
    13
  ),
  o = [p];
function l(c, r, i, m, d, k) {
  return a(), n('div', null, o);
}
var h = s(t, [['render', l]]);
export { g as __pageData, h as default };
