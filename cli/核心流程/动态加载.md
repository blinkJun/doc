# 动态加载执行命令架构



```flow
start=>start: 开始
localPackage=>condition: 是否有本地代码
getCecheDir=>operation: 获取缓存目录
initPackage=>operation: 初始化package对象
packageReady=>condition: 是否安装package
installPackage=>operation: 安装package
updatePackage=>operation: 更新package
entryReady=>condition: 是否有入口文件
exec=>operation: 执行
createCommand=>operation: 生成执行指令
execCommand=>operation: 根据指令启动新进程执行package
execStatus=>condition: 执行是否成功
execLog=>operation: 打印错误
exit1=>end: 结束
exit2=>end: 结束
success=>end: 成功

start(bottom)->localPackage
localPackage(no)->getCecheDir(right)->initPackage
initPackage(right)->packageReady
packageReady(no)->installPackage
packageReady(yes)->updatePackage
installPackage->updatePackage
updatePackage(left)->entryReady
localPackage(yes)->entryReady

entryReady(no)->exit1
entryReady(yes)->createCommand
createCommand(bottom)->execCommand(right)
execCommand(bottom)->execStatus
execStatus(yes)->success
execStatus(no)->execLog(right)->exit2
```