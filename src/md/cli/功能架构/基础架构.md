# 脚手架基础功能架构

![alt 属性文本](../../assets/images/cli-basic.svg)

如图所示，架构分为4大阶段：
1. **启动阶段**：对本地环境进行检查，符合运行环境则继续
2. **命令注册阶段**：注册脚手架功能的相关命令
3. **加载命令阶段**：当调用注册的命令时，实时下载该命令的`npm`包并运行
4. **执行阶段**：传入用户输入的参数并执行此命令模块

在第三阶段加载命令阶段优先判断参数是否包含本地模块地址，有则使用本地模块作为命令模块。若不存在则检查是否缓存有此模块，否则下载此模块，最后检查更新模块，进入到第四阶段执行。
